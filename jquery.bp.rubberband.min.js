/*
 * Rubberband - Responsive breakpoint events
 * @author Ben Plum <benjaminplum@gmail.com>
 * @version 1.0
 *
 * Copyright Â© 2012 Ben Plum <ben@benjaminplum.com>
 * Released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */

(function(c){var a={breakpoints:[1220,960,720,480,320],debounceTime:5},f={},g=null,d={init:function(e){a=jQuery.extend(a,e);a.breakpoints.push(1E4);a.breakpoints.sort(d._sort);c(window).resize(d._respond);d._respond()},_respond:function(){d._clearTimeout();g=setTimeout(function(){d._doRespond()},a.debounceTime)},_doRespond:function(){d._clearTimeout();var e=window.innerWidth?window.innerWidth:document.body.clientWidth-20,b;for(b in a.breakpoints)if(b=parseInt(b,10),a.breakpoints[b+1]&&(e<=a.breakpoints[b]&& e>=a.breakpoints[b+1]?c("body").addClass("bp-min-"+a.breakpoints[b+1]+"-max-"+a.breakpoints[b]):c("body").removeClass("bp-min-"+a.breakpoints[b+1]+"-max-"+a.breakpoints[b])),e<=a.breakpoints[b]&&(e>a.breakpoints[b+1]||"undefined"===typeof a.breakpoints[b+1])&&!c("body").hasClass("bp-max-"+a.breakpoints[b]))c("body").addClass("bp-max-"+a.breakpoints[b]).addClass("bp-min-"+a.breakpoints[b+1]),c("body").removeClass("bp-max-"+f.max).removeClass("bp-min-"+f.min),c(window).trigger("rubberband.exit",[f.max]), c(window).trigger("rubberband.enter",[a.breakpoints[b]]),f.max=a.breakpoints[b],f.min=a.breakpoints[b+1]},_sort:function(a,b){return b-a},_clearTimeout:function(){null!=g&&(clearTimeout(g),g=null)}};c.fn.rubberband=function(a){if(d[a])return d[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return d.init.apply(this,arguments);c.error("RUBBERBAND: '"+a+"' does not exist.")}})(jQuery);